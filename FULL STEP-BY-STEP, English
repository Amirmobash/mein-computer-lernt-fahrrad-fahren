# Raspberry Pi 5 — Bicycle Detector (0 ensure it works)

This project teaches your Raspberry Pi to look at a picture and say:

* **BICYCLE**
* **NOT BICYCLE**

It uses **TensorFlow** (machine learning) + a **kid-friendly GUI** (`testen.py`) where you can open or drag & drop an image.

---

## What you download from GitHub

You will download **ONE file** (already prepared by us):

* `fahrrad_projekt.7z`

This archive already contains:

* `fahrrad_lernen.py` (training script)
* `testen.py` (GUI app)
* `daten/` (image folders, with some images inside)
* (After training) the model file: `mein_fahrrad_modell.h5`

✅ You do **NOT** need extra “instruction files”. Just download the archive and extract it.

---

## 0) Extract the project (into your HOME folder)

1. Download `fahrrad_projekt.7z`
2. Extract it to:

`/home/<yourname>/`

After extracting, you should have a folder like:

`/home/amir/fahrrad_projekt/`

Open Terminal and check:

```bash
ls ~
```

You should see `fahrrad_projekt` in the list.

---

## 1) Open Terminal and go into the project folder

```bash
cd ~/fahrrad_projekt
pwd
```

Expected output (similar):

```bash
/home/amir/fahrrad_projekt
```

---

## 2) Update Raspberry Pi and install basic tools

```bash
sudo apt update && sudo apt full-upgrade -y
sudo apt install -y python3-pip python3-venv python3-tk p7zip-full
```

If you see **no red ERROR lines**, you are good.

---

## 3) Create and activate the Python “magic room” (venv)

A **venv** is a clean box where we install Python packages for THIS project only.

```bash
cd ~/fahrrad_projekt
python3 -m venv meine_umgebung
source meine_umgebung/bin/activate
```

✅ Expected: your terminal line starts with:

```bash
(meine_umgebung)
```

Now upgrade installer tools:

```bash
python -m pip install -U pip setuptools wheel
```

---

## 4) Install the Python packages (stable for Raspberry Pi)

These are the **safe versions** that avoid the common errors you saw earlier (protobuf / imp / conflicts).

```bash
pip install --no-cache-dir "protobuf>=5.28.0,<6" "flatbuffers>=24.3.25,<25"
pip install --no-cache-dir "tensorflow==2.20.0" "numpy" "pillow" "scipy"
```

Quick test (should print versions and NOT crash):

```bash
python3 -c "import tensorflow as tf, flatbuffers, google.protobuf, scipy; print('TF:', tf.__version__); print('flatbuffers:', flatbuffers.__version__); print('protobuf:', google.protobuf.__version__); print('scipy:', scipy.__version__)"
```

---

## 5) Check the image folder structure (VERY IMPORTANT)

This must exist exactly:

* `daten/train/bicycle/`
* `daten/train/not_bicycle/`
* `daten/test/bicycle/`
* `daten/test/not_bicycle/`

Check:

```bash
cd ~/fahrrad_projekt
ls -R daten
```

Expected (similar):

```bash
daten:
test  train

daten/test:
bicycle  not_bicycle

daten/train:
bicycle  not_bicycle
```

✅ Your archive already has these folders.

---

## 6) Put images in the correct folders

### Where do I put bicycle images?

Put bicycle pictures here:

* `daten/train/bicycle/`
* `daten/test/bicycle/`

### Where do I put “not bicycle” images?

Put pictures of **anything else** here:

* `daten/train/not_bicycle/`
* `daten/test/not_bicycle/`

### Can image names be random?

✅ YES. You can keep the original downloaded names.

Rules:

* Only `.jpg`, `.jpeg`, `.png`
* Do **not mix** classes (don’t accidentally put a bicycle inside `not_bicycle`)

### Check how many images you have

Run:

```bash
ls daten/train/bicycle | wc -l
ls daten/train/not_bicycle | wc -l
ls daten/test/bicycle | wc -l
ls daten/test/not_bicycle | wc -l
```

✅ Make sure none of these is **0**.

---

## 7) IMPORTANT: More images = better accuracy (tell kids this!)

If the model sometimes says **BICYCLE** for a not-bicycle image, it usually means:

* You need **more images**
* Your images are too similar
* The “not_bicycle” folder needs more variety (chairs, cars, plants, bags, shoes, etc.)

**Best tip for kids:**

> “Give the computer more training photos, from different angles and places.”

---

## 8) Train the model (this creates the brain file)

Make sure you are in the project folder and venv is active:

```bash
cd ~/fahrrad_projekt
source meine_umgebung/bin/activate
```

Now train:

```bash
python3 fahrrad_lernen.py
```

Expected (similar):

* It prints image counts
* It prints something like: `Found XX images belonging to 2 classes.`
* It shows `Epoch 1/5`, `Epoch 2/5`, ...
* At the end it saves the model

Check the model file exists:

```bash
ls -l mein_fahrrad_modell.h5
```

If you see the file, training worked ✅

---

## 9) Run the GUI app (the picture window)

Start the GUI:

```bash
python3 testen.py
```

Now you can:

* Click **Open Image**
* Or drag & drop an image (optional)

---

## 10) Optional: Enable Drag & Drop (nice feature)

If you want drag & drop inside the GUI:

```bash
pip install --no-cache-dir tkinterdnd2
```

Then run again:

```bash
python3 testen.py
```

---

## 11) Test from Terminal (optional shortcut)

You can also run with an image path:

```bash
python3 testen.py daten/test/bicycle/your_image.jpg
```

---

## 12) If the GUI says “BICYCLE” for NOT bicycle images

Do this checklist:

### A) Make sure training folders are correct

Run:

```bash
python3 -c "from tensorflow.keras.preprocessing.image import ImageDataGenerator; gen=ImageDataGenerator().flow_from_directory('daten/train'); print(gen.class_indices)"
```

Expected (usually):

```bash
{'bicycle': 0, 'not_bicycle': 1}
```

✅ Your `testen.py` must interpret the model output correctly:

* model output = probability of class **1** (= not_bicycle)
* therefore:

  * `prob_not_bicycle = pred`
  * `prob_bicycle = 1 - pred`

### B) Add more images

* Add at least **50–200** per class if possible.
* Keep classes balanced (similar number in each folder).

### C) Add more variety

* bicycles: front/side/back, different bikes, different backgrounds
* not_bicycle: cars, chairs, dogs, plants, backpacks, scooters, helmets, etc.

---

## 13) Quick “Kids explanation” (put this in README too)

### What is training?

Training is like practice.
The computer looks at many pictures and tries to learn patterns.

### What is a model?

A model is a saved “brain file”.
In this project it is:

`mein_fahrrad_modell.h5`

### Why can it be wrong?

Because it learned from your pictures.
If pictures are few or not diverse, it guesses wrong sometimes.

### What is probability?

Probability is how sure the computer feels.
Example:

* Bicycle: 0.80 means “80% sure”.

---

## 14) One-command checklist (when kids get stuck)

Copy and run:

```bash
cd ~/fahrrad_projekt && source meine_umgebung/bin/activate && ls daten/train && ls daten/test && ls -l mein_fahrrad_modell.h5 && python3 testen.py
```

If it opens the GUI, everything is OK ✅

---

If you paste here the output of this one command, I can tell you immediately if your dataset labels are correct:

```bash
python3 -c "from tensorflow.keras.preprocessing.image import ImageDataGenerator; gen=ImageDataGenerator().flow_from_directory('daten/train'); print(gen.class_indices)"
```
